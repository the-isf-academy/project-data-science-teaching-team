---
jupyter:
  jupytext:
    cell_metadata_json: true
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.9.1
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

# 時代革命: A Data Science Investigation About Past Protests Around the World


<img src="https://static01.nyt.com/images/2019/12/15/slideshows/15YIP-October-slide-KNHS/15YIP-October-slide-KNHS-superJumbo.jpg">

[New York Times Photo by Lam Yik Fei ](https://www.nytimes.com/interactive/2019/world/year-in-pictures.html)


## Overarching Question: How does violence impact mass mobilization?


**Why this question?** 


There's a revolutionary movement going on in Hong Kong. People here are mobilizing by the millions in the name of democracy. Sometimes the protests are peaceful; sometimes there are violent clashes. There are cases upon cases of police brutality documented by smartphones and news cameras. There are photos of protestors throwing bricks and molotov cocktails.  

As students and teachers living on this island, we've seen protests ebb and flow around us physically and digitally. We've probably all heard a wide range of voices and opinions, especially related to who's to blame about protests. It's important for us to stay engaged and dig to find the truth. 


At the same time, 2019 saw protests the world round: Colombia/Venezuela, Turkey, Lebanon, Chile, Iraq, Kashmir, Sudan, France, Mexico, Uruguay, Ecuador, Haiti, Gaza, Spain, Pakistan, and more. [See a list here.](https://en.wikipedia.org/wiki/Category:2019_protests) 

See photos [here](https://www.theguardian.com/world/2019/oct/25/protests-rage-around-the-world-hong-kong-lebanon-chile-catalonia-iraq). 

In many cases, protests emerge suddenly. 


So my question is **Why now? And why are these protests so explosive?**


Last month (November 2019), I listened to this podcast <a href = "https://www.stitcher.com/podcast/vox/today-explained/e/64953753">"Why is the world protesting?"</a> that covered the protests in Hong Kong, Chile, and Lebanon at the time. In that podcast, they mentioned that researchers at Harvard University have been studying how many protests have occurred, how protests succeed or fail, or how and why some turn violent. 


According to the researchers, it turns out that protests are on the rise around the world, but government violence has actually been decreasing. I wanted to see the trends in the data for myself. 


## About the data sets

```{python}
#Include any import statements you will need
import pandas as pd
import matplotlib.pyplot as plt
```

```{python}
globaldf = pd.read_csv('mmALL_020619_v15.tab', sep='\t')
hongkongdf = pd.read_csv('hongkongdata-clean.csv')
```

**What is this data about?**


<span class="mark">*Data set 1: Global Data on Mass Mobilization*</span>

This dataset documents over 15,500 citizen-led protests around the world in 162 countries between 1990 and March 2017. Here, a protest is defined as a gathering of 50 or more people to make a demand of the **government**. For each protest, the dataset includes features such as protestor demands, the eventual outcomes, the protest size, and more. 

The data set includes information about the protest, the time and location of the protest, the region and country of the protest, the main reasons for protesting, the state response, and more. 

```{python code_folding=c()}
globaldf.columns
```

<span class="burk">*Data set 2: Hong Kong Data*</span>

This dataset documents Hong Kong anti-ELAB protestor's identities and opinions at the site of different protests from June 2019 to October 2019. The data comes from a set of 12 onsite surveys that have in total been answered by 6,688 respondents.

The data set includes information about their education, their political stance, and their views on violence.

```{python}
hongkongdf.head()
```

**Where is this data from?**


<span class="mark">*Data set 1: Global Data on Mass Mobilization*</span>

After looking up the researchers from the podcast, I found this data set: 
https://dataverse.harvard.edu/dataverse/MMdata
(Clark, David; Regan, Patrick, 2016, "Mass Mobilization Protest Data", https://doi.org/10.7910/DVN/HTTWYL, Harvard Dataverse). https://massmobilization.shinyapps.io/yearlyChangeProtestBehavior/

The main researchers for the Mass Mobilization project are David H. Clark (Binghamton University) and Patrick M. Regan (University of Notre Dame), and the data was made available by a research center at Harvard. The data was compiled from a selected number of English-speaking newspapers. 


<span class="burk">*Data set 2: Hong Kong Data*</span>
    
I wanted to get some data related to the current anti-ELAB movements, so I found this data set initiated and maintained by a research team at Chinese University of Hong Kong: https://sites.google.com/view/antielabsurvey-eng/data-updated-until-oct-2019?authuser=0
The team went out to where protests were happening and selected a random sample of protestors to survey on site. 


**How did this data set get cleaned?**


<span class="mark">*Data set 1: Global Data on Mass Mobilization*</span>

I did not need to do much cleaning of the data myself, but I did exclude all data from the year 2017 because that year's data ends in March and thus is not a full year's worth of data. 

<span class="burk">*Data set 2: Hong Kong Data*</span>

I had to exclude data from certain protest days when the researchers only collected demographic data and no data about opinions. I did this in Google Sheets. 


## Subquestions


**What quantitative subquestions will you investigate?** 


1. Are protests getting more violent around the world? 
2. Do some regions of the world have more violent protests than others? 
3. How is protest violence correlated with protest size, protest length, or protest outcome?
4. Specific to Hong Kong, how do protestors feel about violence?


# Methods and Results


These are the python libraries I will be using. I'll use pandas to handle my data (as data frames), matplotlib to create visualizations, and numpy plus math to help with some calculations. 

```{python}
#Import any helper files you need here
import ipywidgets as widgets
from ipywidgets import interact, interact_manual
import cufflinks as cf
cf.go_offline(connected=True)
cf.set_config_file(colorscale='plotly', world_readable=True)
from helpers import *  
```

## First Research Question: Are violent protests on the rise in the world?


### Methods


**How will you approach this question? Which data will you use? What data science tools/functions will you use?**


Your answer here:

To answer this question, I will make scatter plots showing the number of protests per year over time.

Then, I will separate violent and nonviolent protests and make the same charts for just violent protests and just non-violent protests.


### Results 

```{python}
start_df = globaldf[["startyear", "protesterviolence"]].dropna()
protest_years = start_df["startyear"].unique()
protest_counts = []
for year in protest_years:
    year_count = start_df.loc[start_df["startyear"] == year]["startyear"].count()
    protest_counts.append(year_count)

plt.scatter(protest_years, protest_counts)
plt.title("Protests in The World")
plt.xlabel('Year')
plt.ylabel('Number of Protests')

```

```{python}
start_violent_df = start_df.loc[(start_df["protesterviolence"] == 1)]
violent_protest_years = start_violent_df["startyear"].unique()
violent_protest_counts = []
for year in violent_protest_years:
    year_count = start_violent_df.loc[start_violent_df["startyear"] == year]["startyear"].count()
    violent_protest_counts.append(year_count)
    
start_nonviolent_df = start_df.loc[(start_df["protesterviolence"] == 0)]
nonviolent_protest_years = start_nonviolent_df["startyear"].unique()
nonviolent_protest_counts = []
for year in nonviolent_protest_years:
    year_count = start_nonviolent_df.loc[start_nonviolent_df["startyear"] == year]["startyear"].count()
    nonviolent_protest_counts.append(year_count)
```

```{python}
ax = plt.scatter(nonviolent_protest_years, nonviolent_protest_counts,c='green',alpha=0.5, label="Non-Violent Protests")
ax = plt.scatter(violent_protest_years, violent_protest_counts,c='red',alpha=0.5, label="Violent Protests")

plt.title("Protests in The World")
plt.xlabel('Year')
plt.ylabel('Number of Protests')
plt.legend()
```

<!-- #region {"hide_input": true} -->
This graph shows that protests have been on the rise in general, especially since 2010.
<!-- #endregion -->

## Second Research Question: Do some regions of the world have more violent protests than others?


### Methods


To answer this question, I will divide all of the protests by their region and make a pi chart showing the percentage of the overall protests each region has.


### Results

```{python}
regions_df = globaldf[["startyear", "protesterviolence", "region"]].dropna()
south_am_counts = regions_df.loc[regions_df["region"] == 1]["region"].count()
central_am_counts = regions_df.loc[regions_df["region"] == 2]["region"].count()
north_am_counts = regions_df.loc[regions_df["region"] == 3]["region"].count()
europe_counts = regions_df.loc[regions_df["region"] == 4]["region"].count()
asia_counts = regions_df.loc[regions_df["region"] == 5]["region"].count()
mena_counts = regions_df.loc[regions_df["region"] == 6]["region"].count()
africa_counts = regions_df.loc[regions_df["region"] == 7]["region"].count()
```

```{python}
region_names = ["South America","Central America","North America","Europe", "Asia", "Middle East/North Africa", "Africa"]
region_protests = [south_am_counts, central_am_counts, north_am_counts, europe_counts, asia_counts, mena_counts, africa_counts]

plt.pie(region_protests,            # sets data
        labels = region_names,   # sets labels
        autopct='%1.1f%%')          # displays values
plt.title("Protests Worldwide")
plt.show()
```

```{python}
violent_regions_df = regions_df.loc[regions_df["protesterviolence"] == 1]
violent_south_am_counts = violent_regions_df.loc[violent_regions_df["region"] == 1]["region"].count()
violent_central_am_counts = violent_regions_df.loc[violent_regions_df["region"] == 2]["region"].count()
violent_north_am_counts = violent_regions_df.loc[violent_regions_df["region"] == 3]["region"].count()
violent_europe_counts = violent_regions_df.loc[violent_regions_df["region"] == 4]["region"].count()
violent_asia_counts = violent_regions_df.loc[violent_regions_df["region"] == 5]["region"].count()
violent_mena_counts = violent_regions_df.loc[violent_regions_df["region"] == 6]["region"].count()
violent_africa_counts = violent_regions_df.loc[violent_regions_df["region"] == 7]["region"].count()

```

```{python}
region_names = ["South America","Central America","North America","Europe", "Asia", "Middle East/North Africa", "Africa"]
violent_region_protests = [violent_south_am_counts, violent_central_am_counts, violent_north_am_counts, violent_europe_counts, violent_asia_counts, violent_mena_counts, violent_africa_counts]

plt.pie(violent_region_protests,            # sets data
        labels = region_names,   # sets labels
        autopct='%1.1f%%')          # displays values
plt.title("Violent Protests Worldwide")
plt.show()
```

```{python}
nonviolent_regions_df = regions_df.loc[regions_df["protesterviolence"] == 0]
nonviolent_south_am_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 1]["region"].count()
nonviolent_central_am_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 2]["region"].count()
nonviolent_north_am_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 3]["region"].count()
nonviolent_europe_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 4]["region"].count()
nonviolent_asia_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 5]["region"].count()
nonviolent_mena_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 6]["region"].count()
nonviolent_africa_counts = nonviolent_regions_df.loc[nonviolent_regions_df["region"] == 7]["region"].count()

```

```{python}
region_names = ["South America","Central America","North America","Europe", "Asia", "Middle East/North Africa", "Africa"]
nonviolent_region_protests = [nonviolent_south_am_counts, nonviolent_central_am_counts, nonviolent_north_am_counts, nonviolent_europe_counts, nonviolent_asia_counts, nonviolent_mena_counts, nonviolent_africa_counts]

plt.pie(nonviolent_region_protests,            # sets data
        labels = region_names,   # sets labels
        autopct='%1.1f%%')  # displays values
plt.title("Non-Violent Protests Worldwide")
plt.show()
```

After looking at these pie charts, I found them hard to analyze and still wasn't satisfied with my ability to answer my question. So, I then tried visualizing the data in a stack bar chart so I could more easily compare the number of protests of each kind across regions and within regions.

```{python}
plt.bar(region_names, violent_region_protests, label='Violent Protests')
plt.bar(region_names, nonviolent_region_protests, bottom=violent_region_protests, label='Non-Violent Protests')

plt.ylabel("Number of Protests")
plt.xlabel("Region")
plt.xticks(rotation=90)
plt.legend()
```

With this chart, I get even more insight into the situation. While the African region has more violent protests than other regions, it only has slightly more than the European and Asian region. Overall, violent protests make up a smaller percentage of all protests than non-violent ones.


To answer my question then, it seems that the European, Asian, and African regions have the most violent protests while the African region has the high percentage of violent protests compared to the overall number of protests.


## Second Research Question: 3. How is protest violence correlated with protest length?


### Methods


**How will you approach this question? Which data will you use? What data science tools/functions will you use?**


Your answer here:


### Results 

```{python tags=c("remove_input")}
from datetime import datetime
time_df = globaldf[["startyear", "startmonth", "startday","endyear", "endmonth", "endday", "protesterviolence"]]
time_df = time_df.dropna()
length_array = []

for [startyear, startmonth, startday,endyear, endmonth, endday, protesterviolence] in time_df.values:
    start = datetime(int(startyear), int(startmonth), int(startday))
    end  = datetime(int(endyear), int(endmonth), int(endday))             
    duration = end - start                     
    days  = duration.days  + 1 # if a protest starts and ends on the same day, we consider that one day of protest.
    length_array.append([days, protesterviolence])
```

```{python tags=c("remove_input")}
non_violent_lengths = [i[0] for i in length_array if i[1] < 1 and i[0] > 1 and i[0] < 600]
violent_lengths = [i[0] for i in length_array if i[1] > 0 and i[0] > 1 and i[0] < 600]

figure, axes = plt.subplots()
axes.boxplot(non_violent_lengths, vert=False)
plt.xlabel('Non-violent protest lengths')
plt.title("Do Non-Violent Protests Last Longer?")
```

```{python tags=c("remove_input")}
figure, axes = plt.subplots()
axes.boxplot(violent_lengths, vert=False)
plt.xlabel('Violent protest lengths')
plt.title("Do Violent Protests Last Longer?")
```

It's hard to say based on these box and whisker plots because there are so many outliers, so I decided to just look at the middle 50% of data. 


## Third Research Question: How do Hong Kong protestors feel about violence?

```{python}
hongkongdf.
```

### Methods


**How will you approach this question? Which data will you use? What data science tools/functions will you use?**


Your answer here:


### Results 


**Include cells here to show the results, which could be either a calculation or a visualization.** 


# Discussion


**In summary, what did you discover?**


Your answer here:


**What was most surprising? What made sense? How does this confirm or disprove other sources?**


Your answer here:


**Why does it matter?**


Your answer here:


**Describe an algorithmic choice that you made and how your results could have changed if you made that choice differently.**


Your answer here:


**Let's go deeper. What qualitative questions do you have that cannot be answered with quantitative analysis?**


Your answer here:
